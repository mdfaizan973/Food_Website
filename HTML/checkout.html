<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../Styles/nav.css" />
    <link rel="stylesheet" href="../Styles/footer.css" />
    <link rel="stylesheet" href="../Styles/check.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <title>Document</title>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- Add Font Awesome CSS link here -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <!-- swal -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
      <a class="navbar-brand" href="../HTML/landing_home.html">
        <img
          src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAeCAYAAAB5c901AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABNSURBVHgB7c9BDQAgAMPAgQ4c4F8KDvABFuBHSe+9LGmZ6SsXWkY52b3yW/M5A+kMpDOQzkA6A+kMpDOQzkA6A+kMpDOQzkA6A+kMpNu9MQhKmC+cDgAAAABJRU5ErkJggg=="
          alt=""
        />
        Fc Food</a
      >
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#"><i class="fas fa-hamburger"></i></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="fas fa-pizza-slice"></i></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="fas fa-cookie-bite"></i></a>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0 search-form">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Search"
            aria-label="Search"
          />
          <i class="fas fa-search search-icon"></i>
        </form>
        <a href="../index.html">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </a>

        <a href="../HTML/cart.html">
          <i class="fas fa-shopping-cart cart-icon"
            ><span id="total-cart-item">0</span></i
          >
        </a>
      </div>
    </nav>
    <!-- --- -->
    <div id="head_cont">
      <h1></h1>
    </div>

    <div class="container my-4">
      <div class="row">
        <div class="col-md-6">
          <section class="order-details p-3 bg-light border rounded">
            <h2>Order Summary</h2>

            <div class="cart-items" id="cart-items"></div>

            <div class="order-total text-right mt-4">
              <p>Total Price: $<span id="total-price"></span></p>
            </div>
          </section>
        </div>
        <!-- -- -->

        <!-- -- -->
        <div class="col-md-6" id="payment-section">
          <section class="payment-details p-3 bg-light border rounded">
            <h2>Payment Information</h2>
            <form>
              <div class="form-group">
                <label for="card-number">Card Number</label>
                <input
                  type="number"
                  id="card-number"
                  class="form-control"
                  placeholder="Enter your card number"
                />
              </div>
              <div class="form-group">
                <label for="expiry">Expiry Date</label>
                <input
                  type="number"
                  id="expiry"
                  class="form-control"
                  placeholder="MM/YY"
                />
              </div>
              <div class="form-group">
                <label for="cvv">CVV</label>
                <input
                  type="number"
                  id="cvv"
                  class="form-control"
                  placeholder="CVV"
                />
              </div>
              <button class="btn btn-danger btn-block" id="handlepay">
                Pay Now
              </button>
            </form>
          </section>
        </div>
      </div>
    </div>

    <!-- -------------- -->
    <footer class="footer">
      <div class="container">
        <img
          src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAeCAYAAAB5c901AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABNSURBVHgB7c9BDQAgAMPAgQ4c4F8KDvABFuBHSe+9LGmZ6SsXWkY52b3yW/M5A+kMpDOQzkA6A+kMpDOQzkA6A+kMpDOQzkA6A+kMpNu9MQhKmC+cDgAAAABJRU5ErkJggg=="
          alt=""
        />
        <div class="row">
          <div class="col-md-4">
            <h3>About Us</h3>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla
              dapibus libero nec dui vehicula, quis euismod quam laoreet.
            </p>
          </div>
          <div class="col-md-4">
            <h3>Contact Us</h3>
            <p>Email: info@example.com</p>
            <p>Phone: +1 123 456 7890</p>
            <p>Address: 1234 Main St, City, Country</p>
          </div>
          <div class="col-md-4">
            <h3>Follow Us</h3>
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
<!-- Add Bootstrap JS and jQuery script links here -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
<script>
  let cartData = JSON.parse(localStorage.getItem("cart_food_data"));
  const totalcartitems = document.querySelector("#total-cart-item");
  totalcartitems.innerHTML = cartData.length;

  const cartItemsContainer = document.getElementById("cart-items");
  const totalPriceElement = document.getElementById("total-price");
  const handlepay = document.querySelector("#handlepay");
  const cardnumber = document.querySelector("#card-number");
  const expiry = document.querySelector("#expiry");
  const cvv = document.querySelector("#cvv");

  handlepay.addEventListener("click", function (e) {
    e.preventDefault();
    if (cardnumber.value == "" || expiry.value == "" || cvv.value == "") {
      setTimeout(() => {
        swal({
          title: " Oops!",
          text: "You are missing some fields",
        });
      }, 1200);
    } else {
      setTimeout(() => {
        window.location.href = "../HTML/Donepage.html";
      }, 1500);
    }
  });

  function createCartItem(item) {
    const cartItemDiv = document.createElement("div");
    cartItemDiv.classList.add(
      "order-item",
      "d-flex",
      "align-items-center",
      "mb-3"
    );

    const itemImage = document.createElement("img");
    itemImage.src = item.images;
    itemImage.alt = item.name;
    itemImage.classList.add("mr-3");
    itemImage.width = 80;
    itemImage.height = 80;

    const itemContent = document.createElement("div");

    const itemName = document.createElement("h5");
    itemName.textContent = item.name.substring(0, 15) + "....";

    const itemPrice = document.createElement("p");
    itemPrice.innerHTML = `Price: $<span class="price">${item.price.toFixed(
      2
    )}</span>`;

    itemContent.appendChild(itemName);
    itemContent.appendChild(itemPrice);

    cartItemDiv.appendChild(itemImage);
    cartItemDiv.appendChild(itemContent);

    return cartItemDiv;
  }

  function displayCartItems(cartdata) {
    cartdata.forEach((item) => {
      const cartItemElement = createCartItem(item);
      cartItemsContainer.appendChild(cartItemElement);
    });
  }

  function calculateTotalPrice(cartdata) {
    const totalPrice = cartdata.reduce((total, item) => total + item.price, 0);
    const discount = totalPrice * 0.11;
    const discountedTotal = totalPrice - discount;

    totalPriceElement.textContent = discountedTotal.toFixed(2);
  }

  displayCartItems(JSON.parse(localStorage.getItem("cart_food_data")));
  calculateTotalPrice(JSON.parse(localStorage.getItem("cart_food_data")));
</script>
